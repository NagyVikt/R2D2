<?xml version="1.0" encoding="utf-8"?>

<robot
  name="atirobot" xmlns:xacro="http://ros.org/wiki/xacro">
  <!-- ********************** ROBOT BASE *********************************  -->

<link name="world"/>
  
  <joint name="world_joint" type="fixed">
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <parent link="world"/>
    <child link="base_link"/>
  </joint>

  <link
    name="base_link">
    <inertial>
      <origin
        xyz="0.000766841725954676 2.02048717095321E-17 -0.329344123917288"
        rpy="0 0 0" />
      <mass
        value="205.727203925287" />
      <inertia
        ixx="10.9025323917163"
        ixy="4.42975783799053E-16"
        ixz="0.0566917218527978"
        iyy="15.7337841319646"
        iyz="2.63067508042847E-16"
        izz="11.7435298335432" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://r2d2/meshes/robotbase.stl" />
      </geometry>
      <material
        name="">
        <color
          rgba="1 0.968627450980392 0.215686274509804 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://r2d2/meshes/robotbase.stl" />
      </geometry>
    </collision>
  </link>

<link name="base_footprint">
</link>

<!-- Define joint between base_footprint and base_link -->
<joint name="base_footprint_to_base_link" type="fixed">
  <origin xyz="0 0 0" rpy="0 0 0"/>
  <parent link="base_footprint"/>
  <child link="base_link"/>
</joint>

  <link
    name="linkLeft">
    <inertial>
      <origin
        xyz="5.55111512312578E-17 -0.0277740369558408 1.38777878078145E-17"
        rpy="0 0 0" />
      <mass
        value="1.25388816786403" />
      <inertia
        ixx="0.0025932643932963"
        ixy="-3.98187122859934E-20"
        ixz="-3.88589526202761E-21"
        iyy="0.00450987897269118"
        iyz="1.4847523089569E-21"
        izz="0.0025932643932963" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://r2d2/meshes/linkLeft_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://r2d2/meshes/linkLeft_link.STL" />
      </geometry>
    </collision>
  </link>
  
  <joint
    name="leftJoint"
    type="continuous">
    <origin
      xyz="-0.2025 0.287 -0.65199"
      rpy="0 0 0" />
    <parent
      link="base_link" />
    <child
      link="linkLeft" />
    <axis
      xyz="0 -1 0" />
    <limit
      effort="1"
      velocity="1" />
  
  </joint>
  <link
    name="linkRight">
    <inertial>
      <origin
        xyz="2.77555756156289E-17 0.0277740369558408 -1.12757025938492E-17"
        rpy="0 0 0" />
      <mass
        value="1.25388816786403" />
      <inertia
        ixx="0.0025932643932963"
        ixy="-1.4238227452672E-21"
        ixz="-1.64300334597853E-19"
        iyy="0.00450987897269118"
        iyz="3.37060546227951E-20"
        izz="0.0025932643932963" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://r2d2/meshes/linkRight_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://r2d2/meshes/linkRight_link.STL" />
      </geometry>
    </collision>
  </link>
  
  <joint
    name="jointRight"
    type="continuous">
    <origin
      xyz="-0.2025 -0.287 -0.65199"
      rpy="0 0 0" />
    <parent
      link="base_link" />
    <child
      link="linkRight" />
    <axis
      xyz="0 -1 0" />
    <limit
      effort="1"
      velocity="1" />
  </joint>



<!-- *********************** RealSense D435I CAMERA SETUP *************************  -->
  

<joint name="camera_joint" type="fixed">
  <origin xyz="-0.345 0 -0.102" rpy="0 0 0"/>
  <parent link="base_link"/>
  <child link="realsense_link"/>
</joint>
 

  <link name="realsense_link">
    <visual>
     <origin xyz="0 0 0" rpy="1.57 0 1.57"/>
      <geometry>
       <mesh filename="package://turtlebot3_description/meshes/sensors/r200.dae" />
      </geometry>
    </visual>
    <collision>
      <origin xyz="0.003 0.065 0.007" rpy="0 0 0"/>
      <geometry>
        <box size="0.012 0.132 0.020"/>
      </geometry>
    </collision>

    <!-- This inertial field needs doesn't contain reliable data!! -->
    <!--   <inertial>
      <mass value="0.564" />
      <origin xyz="0 0 0" />
      <inertia ixx="0.003881243" ixy="0.0" ixz="0.0"
               iyy="0.000498940" iyz="0.0"
               izz="0.003879257" />
    </inertial>-->
  </link>

  <joint name="camera_rgb_joint" type="fixed">
    <origin xyz="0.005 0.018 0.013" rpy="-1.57 0 -1.57"/>
    <!-- <origin xyz="${r200_cam_rgb_px} ${r200_cam_rgb_py} ${r200_cam_rgb_pz}" rpy="0 0 0"/> -->
    <parent link="realsense_link"/>
    <child link="camera_rgb_frame"/>
  </joint>
  <link name="camera_rgb_frame"/>

  <joint name="camera_rgb_optical_joint" type="fixed">
    <origin xyz="0 0 0" rpy="-1.57 0 -1.57"/>
    <parent link="camera_rgb_frame"/>
    <child link="camera_rgb_optical_frame"/>
  </joint>
  <link name="camera_rgb_optical_frame"/>

  <joint name="realsense_depth_joint" type="fixed">
    <origin xyz="0.005 0.028 0.013" rpy="-1.57 0 -1.57"/>
    <!-- <origin xyz="${r200_cam_rgb_px} ${r200_cam_rgb_py + r200_cam_depth_offset} ${r200_cam_rgb_pz}" rpy="0 0 0"/> -->
    <parent link="realsense_link"/>
    <child link="realsense_depth_frame"/>
  </joint>
  <link name="realsense_depth_frame"/>

  <joint name="camera_depth_optical_joint" type="fixed">
    <origin xyz="0 0 0" rpy="-1.57 0 -1.57"/>
    <parent link="realsense_depth_frame"/>
    <child link="camera_depth_optical_frame"/>
  </joint>
  <link name="camera_depth_optical_frame"/>



</robot>